{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nconst _excluded = [\"source\", \"events\", \"contentPosition\", \"hashPlaceholderContentPosition\", \"priority\", \"style\", \"hashPlaceholderStyle\", \"tintColor\", \"className\", \"accessibilityLabel\", \"cachePolicy\"];\nvar _jsxFileName = \"/Users/shubhamsharma/Downloads/newApp/node_modules/expo-image/src/web/ImageWrapper.tsx\";\nimport React, { useEffect } from 'react';\nimport ColorTintFilter, { getTintColorStyle } from './ColorTintFilter';\nimport { getImageWrapperEventHandler } from './getImageWrapperEventHandler';\nimport { useHeaders, useImageHashes } from './hooks';\nimport { absoluteFilledPosition, getObjectPositionFromContentPositionObject } from './positioning';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction getFetchPriorityFromImagePriority(priority = 'normal') {\n  return priority && ['low', 'high'].includes(priority) ? priority : 'auto';\n}\nfunction getImgPropsFromSource(source) {\n  if (source && 'srcset' in source) {\n    return {\n      srcSet: source.srcset,\n      sizes: source.sizes\n    };\n  }\n  return {};\n}\nconst ImageWrapper = React.forwardRef((_ref, ref) => {\n  let {\n      source,\n      events,\n      contentPosition,\n      hashPlaceholderContentPosition,\n      priority,\n      style,\n      hashPlaceholderStyle,\n      tintColor,\n      className,\n      accessibilityLabel,\n      cachePolicy\n    } = _ref,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  useEffect(() => {\n    events?.onMount?.forEach(e => e?.());\n  }, []);\n  const {\n    resolvedSource,\n    isImageHash\n  } = useImageHashes(source);\n  const objectPosition = getObjectPositionFromContentPositionObject(isImageHash ? hashPlaceholderContentPosition : contentPosition);\n  const sourceWithHeaders = useHeaders(resolvedSource, cachePolicy, events?.onError);\n  if (!sourceWithHeaders) {\n    return null;\n  }\n  return _jsxDEV(_Fragment, {\n    children: [_jsxDEV(ColorTintFilter, {\n      tintColor: tintColor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), _jsxDEV(\"img\", Object.assign({\n      ref: ref,\n      alt: accessibilityLabel,\n      className: className,\n      src: sourceWithHeaders?.uri || undefined,\n      style: Object.assign({\n        objectPosition\n      }, absoluteFilledPosition, getTintColorStyle(tintColor), style, isImageHash ? hashPlaceholderStyle : {}),\n      fetchpriority: getFetchPriorityFromImagePriority(priority || 'normal')\n    }, getImageWrapperEventHandler(events, sourceWithHeaders), getImgPropsFromSource(source), props), source?.uri, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n});\nexport default ImageWrapper;","map":{"version":3,"names":["React","useEffect","ColorTintFilter","getTintColorStyle","getImageWrapperEventHandler","useHeaders","useImageHashes","absoluteFilledPosition","getObjectPositionFromContentPositionObject","jsxDEV","_jsxDEV","Fragment","_Fragment","getFetchPriorityFromImagePriority","priority","includes","getImgPropsFromSource","source","srcSet","srcset","sizes","ImageWrapper","forwardRef","_ref","ref","events","contentPosition","hashPlaceholderContentPosition","style","hashPlaceholderStyle","tintColor","className","accessibilityLabel","cachePolicy","props","_objectWithoutPropertiesLoose","_excluded","onMount","forEach","e","resolvedSource","isImageHash","objectPosition","sourceWithHeaders","onError","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","assign","alt","src","uri","undefined","fetchpriority"],"sources":["/Users/shubhamsharma/Downloads/newApp/node_modules/expo-image/src/web/ImageWrapper.tsx"],"sourcesContent":["import React, { useEffect, Ref } from 'react';\n\nimport ColorTintFilter, { getTintColorStyle } from './ColorTintFilter';\nimport { ImageWrapperProps } from './ImageWrapper.types';\nimport { getImageWrapperEventHandler } from './getImageWrapperEventHandler';\nimport { useHeaders, useImageHashes } from './hooks';\nimport { absoluteFilledPosition, getObjectPositionFromContentPositionObject } from './positioning';\nimport { SrcSetSource } from './useSourceSelection';\nimport { ImageNativeProps, ImageSource } from '../Image.types';\n\nfunction getFetchPriorityFromImagePriority(priority: ImageNativeProps['priority'] = 'normal') {\n  return priority && ['low', 'high'].includes(priority) ? priority : 'auto';\n}\n\nfunction getImgPropsFromSource(source: ImageSource | SrcSetSource | null | undefined) {\n  if (source && 'srcset' in source) {\n    return {\n      srcSet: source.srcset,\n      sizes: source.sizes,\n    };\n  }\n  return {};\n}\n\nconst ImageWrapper = React.forwardRef(\n  (\n    {\n      source,\n      events,\n      contentPosition,\n      hashPlaceholderContentPosition,\n      priority,\n      style,\n      hashPlaceholderStyle,\n      tintColor,\n      className,\n      accessibilityLabel,\n      cachePolicy,\n      ...props\n    }: ImageWrapperProps,\n    ref: Ref<HTMLImageElement>\n  ) => {\n    useEffect(() => {\n      events?.onMount?.forEach((e) => e?.());\n    }, []);\n\n    // Thumbhash uri always has to start with 'thumbhash:/'\n    const { resolvedSource, isImageHash } = useImageHashes(source);\n    const objectPosition = getObjectPositionFromContentPositionObject(\n      isImageHash ? hashPlaceholderContentPosition : contentPosition\n    );\n\n    const sourceWithHeaders = useHeaders(resolvedSource, cachePolicy, events?.onError);\n    if (!sourceWithHeaders) {\n      return null;\n    }\n    return (\n      <>\n        <ColorTintFilter tintColor={tintColor} />\n        <img\n          ref={ref}\n          alt={accessibilityLabel}\n          className={className}\n          src={sourceWithHeaders?.uri || undefined}\n          key={source?.uri}\n          style={{\n            objectPosition,\n            ...absoluteFilledPosition,\n            ...getTintColorStyle(tintColor),\n            ...style,\n            ...(isImageHash ? hashPlaceholderStyle : {}),\n          }}\n          // @ts-ignore\n          // eslint-disable-next-line react/no-unknown-property\n          fetchpriority={getFetchPriorityFromImagePriority(priority || 'normal')}\n          {...getImageWrapperEventHandler(events, sourceWithHeaders)}\n          {...getImgPropsFromSource(source)}\n          {...props}\n        />\n      </>\n    );\n  }\n);\n\nexport default ImageWrapper;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAa,OAAO;AAE7C,OAAOC,eAAe,IAAIC,iBAAiB,QAAQ,mBAAmB;AAEtE,SAASC,2BAA2B,QAAQ,+BAA+B;AAC3E,SAASC,UAAU,EAAEC,cAAc,QAAQ,SAAS;AACpD,SAASC,sBAAsB,EAAEC,0CAA0C,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAInG,SAASC,iCAAiCA,CAACC,QAAsC,GAAG,QAAQ,EAAE;EAC5F,OAAOA,QAAQ,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAACC,QAAQ,CAACD,QAAQ,CAAC,GAAGA,QAAQ,GAAG,MAAM;AAC3E;AAEA,SAASE,qBAAqBA,CAACC,MAAqD,EAAE;EACpF,IAAIA,MAAM,IAAI,QAAQ,IAAIA,MAAM,EAAE;IAChC,OAAO;MACLC,MAAM,EAAED,MAAM,CAACE,MAAM;MACrBC,KAAK,EAAEH,MAAM,CAACG;IAChB,CAAC;EACH;EACA,OAAO,CAAC,CAAC;AACX;AAEA,MAAMC,YAAY,GAAGrB,KAAK,CAACsB,UAAU,CACnC,CAAAC,IAAA,EAeEC,GAA0B,KACvB;EAAA,IAfH;MACEP,MAAM;MACNQ,MAAM;MACNC,eAAe;MACfC,8BAA8B;MAC9Bb,QAAQ;MACRc,KAAK;MACLC,oBAAoB;MACpBC,SAAS;MACTC,SAAS;MACTC,kBAAkB;MAClBC;IAEiB,CAAC,GAAAV,IAAA;IADfW,KAAK,GAAAC,6BAAA,CAAAZ,IAAA,EAAAa,SAAA;EAIVnC,SAAS,CAAC,MAAM;IACdwB,MAAM,EAAEY,OAAO,EAAEC,OAAO,CAAEC,CAAC,IAAKA,CAAC,GAAG,CAAC,CAAC;EACxC,CAAC,EAAE,EAAE,CAAC;EAGN,MAAM;IAAEC,cAAc;IAAEC;EAAY,CAAC,GAAGnC,cAAc,CAACW,MAAM,CAAC;EAC9D,MAAMyB,cAAc,GAAGlC,0CAA0C,CAC/DiC,WAAW,GAAGd,8BAA8B,GAAGD,eACjD,CAAC;EAED,MAAMiB,iBAAiB,GAAGtC,UAAU,CAACmC,cAAc,EAAEP,WAAW,EAAER,MAAM,EAAEmB,OAAO,CAAC;EAClF,IAAI,CAACD,iBAAiB,EAAE;IACtB,OAAO,IAAI;EACb;EACA,OACEjC,OAAA,CAAAE,SAAA;IAAAiC,QAAA,GACEnC,OAAA,CAACR,eAAe;MAAC4B,SAAS,EAAEA;IAAU;MAAAgB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACzCvC,OAAA,QAAAwC,MAAA,CAAAC,MAAA;MACE3B,GAAG,EAAEA,GAAI;MACT4B,GAAG,EAAEpB,kBAAmB;MACxBD,SAAS,EAAEA,SAAU;MACrBsB,GAAG,EAAEV,iBAAiB,EAAEW,GAAG,IAAIC,SAAU;MAEzC3B,KAAK,EAAAsB,MAAA,CAAAC,MAAA;QACHT;MAAc,GACXnC,sBAAsB,EACtBJ,iBAAiB,CAAC2B,SAAS,CAAC,EAC5BF,KAAK,EACJa,WAAW,GAAGZ,oBAAoB,GAAG,CAAC,CAAC,CAC3C;MAGF2B,aAAa,EAAE3C,iCAAiC,CAACC,QAAQ,IAAI,QAAQ;IAAE,GACnEV,2BAA2B,CAACqB,MAAM,EAAEkB,iBAAiB,CAAC,EACtD3B,qBAAqB,CAACC,MAAM,CAAC,EAC7BiB,KAAK,GAbJjB,MAAM,EAAEqC,GAAG;MAAAR,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAcjB,CAAC;EAAA,eACF,CAAC;AAEP,CACF,CAAC;AAED,eAAe5B,YAAY","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}